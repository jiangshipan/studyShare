package com.jsp.studyShare.Service;import com.jsp.studyShare.Dao.CommentDao;import com.jsp.studyShare.Dao.ReplyDao;import com.jsp.studyShare.model.Comment;import com.jsp.studyShare.model.HostHolder;import com.jsp.studyShare.model.Reply;import com.jsp.studyShare.model.ResponseComment;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.ArrayList;import java.util.Date;import java.util.List;@Servicepublic class CommentService {    @Autowired    private CommentDao commentDAO;    @Autowired    private HostHolder hostHolder;    @Autowired    private TopicService topicService;    @Autowired    private ReplyDao replyDAO;    public void addComment(int tid, String comment) {        Comment com = new Comment();        com.setTid(tid);        com.setComment(comment);        com.setCommentTime(new Date());        com.setOpenid(hostHolder.getUser().getOpenid());        com.setStatus(1);        //根据tid，查询到toipic 评论数 +1        topicService.addCommentCount(tid);        commentDAO.addComment(com);    }    public List<ResponseComment> getComments(int tid) {        List<Comment> comments = commentDAO.getComments(tid, 1);        List<ResponseComment> rcoms = new ArrayList<>();        for (Comment comment : comments) {            ResponseComment rcom = new ResponseComment();            //查询单个comment下的reply            List<Reply> replys = replyDAO.getReply(comment.getCid());            rcom.setComment(comment);            rcom.setReplys(replys);            rcoms.add(rcom);        }        return rcoms;    }    public void deleComment(int cid) {        commentDAO.updateStatus(cid, 0);    }}