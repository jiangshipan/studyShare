package com.jsp.studyShare.Service;import com.jsp.studyShare.Dao.EmailDao;import com.jsp.studyShare.model.Email;import com.jsp.studyShare.model.Response;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.util.StringUtils;@Servicepublic class EmailService {    @Autowired    private EmailDao emailDAO;    public String addEmail(String email, int code) {        Email existEmail = emailDAO.selectEmail(email);        //如果邮箱存在，且已经成功注册(openid为0，代表未注册成功)        if (existEmail != null) {            if (StringUtils.isEmpty(existEmail.getOpenid())) {                //邮箱存在，且未绑定用户,只变更注册码                existEmail.setCode(code);                emailDAO.updateEmail(existEmail);            } else {                //该邮箱已经被人使用                return "邮箱已经被人使用";            }        } else {            Email e = new Email();            e.setEmail(email);            e.setCode(code);            e.setOpenid(null);            emailDAO.addEmail(e);        }        return null;    }    /**     * 验证注册码是否正确     * @param email     * @param code     * @return     */    public int checkCode(String email, int code) {        Email existEmail = emailDAO.selectEmail(email);        int correctCode = existEmail.getCode();        if (code == correctCode) {            return 1;        }        return 0;    }}