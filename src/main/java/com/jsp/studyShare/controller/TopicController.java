package com.jsp.studyShare.controller;import com.jsp.studyShare.Dao.TopicDao;import com.jsp.studyShare.Service.TopicService;import com.jsp.studyShare.model.Response;import com.jsp.studyShare.model.ResponseDetail;import com.jsp.studyShare.model.ResponseTopic;import com.jsp.studyShare.utils.JsonUtil;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.*;import java.util.List;import java.util.Map;@RequestMapping("/topic")@Controllerpublic class TopicController {    private static final Logger logger = LoggerFactory.getLogger(TopicController.class);    @Autowired    private TopicService topicService;    /**     * 新增topic     * @param jsonStr     * @return     */    @RequestMapping(value = "/add", method = {RequestMethod.POST})    @ResponseBody    public Response addTopic(@RequestBody String jsonStr) {        try {            Map<String, String> map = JsonUtil.strToMap(jsonStr);            String subject = map.get("subject");            String contents = map.get("contents");            Map<String, String> result = topicService.addTopic(subject, contents);            if (result.get("msg").equals("新增成功")) {                return new Response(0, result.get("msg"));            }            return new Response(1, result.get("msg"));        } catch (Exception e) {            logger.error("addTopic:", e);            return new Response(1, "新增失败");        }    }    /**     * 获取所有topic     * @return     */    @RequestMapping(path = "/get", method = {RequestMethod.GET})    @ResponseBody    public Response getTopics() {        try {            List<ResponseTopic> topics = topicService.getTopics();            return new Response(0, "获取成功", topics);        } catch (Exception e) {            logger.error("getTopics:", e);            return new Response(1, "获取失败");        }    }    /**     * 获取topic的详细信息     * @param tid     * @return     */    @RequestMapping("/detail")    @ResponseBody    public Response getDetail(@RequestParam("tid") int tid) {        try {            return new Response(0, "成功",topicService.getDetail(tid));        } catch (Exception e) {            logger.error("getDeatil:", e);            return new Response(1, "获取失败");        }    }    @RequestMapping("/dele")    @ResponseBody    public Response deleTopic(@RequestParam("tid") int tid) {        try {            topicService.deleTopic(tid);            return new Response(0, "删除成功");        } catch (Exception e) {            logger.error("dele:", e);            return new Response(1, "删除失败");        }    }}